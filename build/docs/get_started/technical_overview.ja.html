<!DOCTYPE html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <title>AMP がパフォーマンスを改善する仕組み</title>
    <link rel="canonical" href="https://www.ampproject.org/docs/get_started/technical_overview.ja.html">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <meta property="og:description" content="AMP ページは以下の最適化処理の組み合わせによって高速化されており、一瞬で読み込まれているように見えます。">
    <meta name="description" content="AMP ページは以下の最適化処理の組み合わせによって高速化されており、一瞬で読み込まれているように見えます。">
    <link rel="shortcut icon" href="/docs/assets/amp_favicon.png?v=2">

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>

    <style amp-custom>
    body,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}html,body{background-color:#fbfafb;font-family:Roboto,verdana,arial,sans-serif;margin:0;overflow-x:hidden;padding:0}body{padding-top:66px}ul li,ol li{color:#333;font-size:16px;font-weight:300;line-height:24px}p{color:#333;font-size:16px;font-weight:300;line-height:24px}.container{box-sizing:border-box;margin:0 auto;max-width:1000px;padding:0 20px}.container.md{max-width:800px}.wrap{background-color:#fff;margin:0 auto}.centered{text-align:center}@media only screen and (max-width: 870px){.centered{text-align:left}}.align-right{text-align:right}.clearfix:after{content:"";display:table;clear:both}.clearfix .left{float:left}.clearfix .right{float:right}.clearfix .fill{overflow:hidden;width:auto}h1,h2,h3,h4,h5{color:#147bc1;font-weight:300;margin-top:1.1em;margin-bottom:0.5em}h1{font-size:43px}h2{font-size:36px}h3{font-size:26px}a{color:#0360B5;text-decoration:none}a:hover{text-decoration:underline}a.button{padding:1em;display:block;background-color:#F5F5F5;text-align:center}blockquote{color:#797c82;border-left:4px solid #f5f5f5;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}code{font-size:15px;border:1px solid #f5f5f5;border-radius:3px}code{padding:1px 5px}table{border-collapse:collapse}td,th{border:1px solid #FFFFFF;background:#F7F7F7;padding:0.5rem;text-align:left}td.col-fourty{width:40%}td.col-thirty{width:30%}th{background:#eee}th.col-twenty{width:20%}header{-webkit-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;-moz-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;font-size:14px;font-weight:300;transform:translateZ(0);backface-visibility:hidden;background-color:#fff}header .container{padding:0}@media only screen and (max-width: 870px){header .container{padding:0 10px}}header.absolute,header.fixed{-moz-transform:translateY(0%);-o-transform:translateY(0%);-ms-transform:translateY(0%);-webkit-transform:translateY(0%);transform:translateY(0%);-moz-transition:all 0.25s ease;-o-transition:all 0.25s ease;-ms-transition:all 0.25s ease;-webkit-transition:all 0.25s ease;transition:all 0.25s ease;left:0;position:fixed;top:0;width:100%;z-index:1000}header.absolute{position:absolute}header.nav--pinned,header.nav--unpinned,header.nav--top{position:fixed}@media only screen and (max-width: 870px){header.nav--pinned,header.nav--unpinned,header.nav--top{position:relative}}header.nav--pinned,header.nav--unpinned{background:#147bc1}header.nav--top{background-color:transparent}header.hidden{display:block}@media only screen and (max-width: 870px){header.hidden{-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);-webkit-transform:translateY(-100%);transform:translateY(-100%)}}header.menu-open{transform:translate(-243px, 0px)}@media only screen and (max-width: 870px){header .wrap{color:transparent}}header .content.mobile-show{padding:0 10px 5px}header .left-nav{-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;float:left;font-size:14px;letter-spacing:0.04em;margin-left:0}@media only screen and (max-width: 870px){header .left-nav{-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;flex:1 1 auto;padding:0 0 5px 0;text-align:left;width:auto}}header .left-nav .header-title{background-image:url("/docs/assets/logo-blue.svg");background-position:center left;background-repeat:no-repeat;background-size:40px 40px;color:#147bc1;font-family:Roboto, verdana, arial, sans-serif;margin:10px 0;padding:15px 10px 15px 50px;text-transform:none;white-space:nowrap;width:auto}@media only screen and (max-width: 870px){header .left-nav .header-title{line-height:41px;margin:6px 0;padding:0 0 0 50px;width:auto}}@media only screen and (max-width: 870px){header .clearfix{display:flex;flex-wrap:wrap-reverse}}header .alt{padding:15px 0;text-align:right;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-ms-flex-pack:center}header .alt.right{letter-spacing:0.04em;font-size:14px}@media only screen and (max-width: 870px){header .alt.right{float:right;text-align:center;flex:0;padding:0 0 10px;font-size:12px;display:inline-block}}header .tab{color:#147bc1;display:inline-block;padding:10px 15px;text-decoration:none;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab{margin-left:auto;padding:10px 12px}}header .tab.go-button{-webkit-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);-moz-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);background-color:#147bc1;border:0;border-radius:4px;color:#fff;font-family:Roboto, verdana, arial, sans-serif;font-size:14px;font-weight:500;padding:10px 20px;margin-left:10px;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab.go-button{margin-right:5px;margin-left:auto;padding:8px 10px}}header .tab.go-button:hover{text-decoration:none}header .tab.hamburger{font-size:50px;line-height:38px;background:none;border:none;margin-top:0;padding-top:0;position:relative;top:4px;display:none}@media only screen and (max-width: 870px){header .tab.desktop{display:none}header .tab.hamburger{display:inline-block}}@media only screen and (max-width: 320px){header .header-title span{display:none}header .header-title::after{content:"AMP"}}.main{display:-webkit-flex;display:flex;padding-top:40px;padding-bottom:30px}.main h1{margin-top:0}.main h1:before,.main h2:before,.main h3:before,.main h4:before,.main h5:before{display:block;content:" ";margin-top:-106px;height:106px;visibility:hidden}.main .content{flex-grow:1;-webkit-flex-grow:1;transition:all 0.25s ease;transform:translate(0, 0);will-change:transform;word-break:break-word;min-width:0}.main .content.menu-open{transform:translate(-243px, 0)}.main .content ul,.main .content ol{margin-left:40px}.main .content{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.main amp-img,.main amp-youtube,.main amp-iframe{margin:1em 0}nav{border-right:2px solid #E6E6E6;padding:20px;margin-right:30px;margin-left:-20px;width:200px;flex-shrink:0;-webkit-flex-shrink:0;background:#F7F7F7;margin-top:-40px;margin-bottom:-30px}nav h2{font-size:20px;color:#111;margin-top:0;margin-bottom:10px}nav ul li,nav ol li{margin-bottom:10px;list-style:none}nav ul li ul,nav ul li ol,nav ol li ul,nav ol li ol{padding-left:0;margin-left:20px;margin-bottom:1.2em}nav ul li ul li,nav ul li ol li,nav ol li ul li,nav ol li ol li{margin-bottom:6px;font-size:14px;list-style:square;color:#CECECE}nav ul li ul li.current,nav ul li ol li.current,nav ol li ul li.current,nav ol li ol li.current{color:#222}nav ul li ul li span,nav ul li ol li span,nav ol li ul li span,nav ol li ol li span{font-weight:400;color:#222}nav ul li ul li ul,nav ul li ul li ol,nav ul li ol li ul,nav ul li ol li ol,nav ol li ul li ul,nav ol li ul li ol,nav ol li ol li ul,nav ol li ol li ol{margin-bottom:0;margin-left:0;padding-left:20px;border-top:1px solid #eee;padding-top:3px;padding-bottom:0px}nav ul li ul li ol li,nav ul li ol li ol li,nav ol li ul li ol li,nav ol li ol li ol li{list-style:decimal}@media only screen and (max-width: 870px){.container nav{display:none}amp-sidebar nav{margin-right:0;border-right:none;margin-top:0;padding-left:36px}}pre{overflow:auto;tab-size:2;word-break:normal;line-height:1.4;background:#F7F7F7}pre>code{white-space:pre;word-wrap:initial;display:block}pre>code td{border:0}.highlight .hll{background-color:#ffc}.highlight .c{color:#aaaaaa;font-style:italic}.highlight .err{color:#F00000}.highlight .k{color:#00a}.highlight .cm{color:#aaaaaa;font-style:italic}.highlight .cp{color:#4c8317}.highlight .c1{color:#aaaaaa;font-style:italic}.highlight .cs{color:#0000aa;font-style:italic}.highlight .gd{color:#a00}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#000080;font-weight:bold}.highlight .gi{color:#0a0}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#800080;font-weight:bold}.highlight .gt{color:#a00}.highlight .kc{color:#00a}.highlight .kd{color:#00a}.highlight .kn{color:#00a}.highlight .kp{color:#00a}.highlight .kr{color:#00a}.highlight .kt{color:#0aa}.highlight .m{color:#099}.highlight .s{color:#a50}.highlight .na{color:#1e90ff}.highlight .nb{color:#0aa}.highlight .nc{color:#00aa00;text-decoration:underline}.highlight .no{color:#a00}.highlight .nd{color:#888}.highlight .ni{color:#800000;font-weight:bold}.highlight .nf{color:#0a0}.highlight .nn{color:#00aaaa;text-decoration:underline}.highlight .nt{color:#1e90ff;font-weight:bold}.highlight .nv{color:#a00}.highlight .ow{color:#00a}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#a50}.highlight .sc{color:#a50}.highlight .sd{color:#a50}.highlight .s2{color:#a50}.highlight .se{color:#a50}.highlight .sh{color:#a50}.highlight .si{color:#a50}.highlight .sx{color:#a50}.highlight .sr{color:#099}.highlight .s1{color:#a50}.highlight .ss{color:#00a}.highlight .bp{color:#0aa}.highlight .vc{color:#a00}.highlight .vg{color:#a00}.highlight .vi{color:#a00}.highlight .il{color:#099}.highlight .lineno{-webkit-user-select:none;-moz-user-select:none;-o-user-select:none}.lineno::-moz-selection{background-color:transparent}.lineno::selection{background-color:transparent}footer{padding:40px 0 60px 100px;background-color:#f5f5f5}footer p{margin:0}footer .footer-image{height:25px;width:25px;padding-left:25px;float:right}
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,500,700">
  </head>

  <body>
    <amp-analytics type="googleanalytics" id="analytics-ga">
    <script type="application/json">
    {
      "vars": {
        "account": "UA-67833617-1"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
    </script>
    </amp-analytics>

    <amp-sidebar id='sidebar' side='right' layout='nodisplay'>
              
        <nav>
          <ul>
            
            

            <li>
            <h2>使ってみる</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.ja.html">AMP とは</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.ja.html">初めての AMP ページを作成する</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li class="current">
                  <span>AMP がパフォーマンスを改善する仕組み</span>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>ガイド</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.ja.html">アナリティクスの設定をする</a>
                

                

                </li>
                

              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>リファレンス</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>サポート</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

    </amp-sidebar>

    <header class="fixed">
      <div class="wrap">
        <div class="container">
          <div class="clearfix">
          <div class="left-nav">
              <a href="https://ampproject.org" class="tab header-title">
                <span>Accelerated
                Mobile
                Pages
                Project</span>
              </a>
            </div>
            <div class="right alt">
              <a class="tab desktop" href="/docs/support/faqs.html">
                よくある質問
              </a>
              <a class="tab desktop" href="https://amphtml.wordpress.com">
                ブログ
              </a>
              <a class="tab desktop" href="https://github.com/ampproject/amphtml">
                GitHub
              </a>
              <a class="tab desktop" href="/docs/get_started/about-amp.html">
                ドキュメント
              </a>
              <button class="tab hamburger" id="menu-button" on='tap:sidebar.toggle'>&#x2261;</button>
            </div>
          </div>
        </div>
      </div>
    </header>


    <div class="wrap">
      <div class="container main">
        
        <nav>
          <ul>
            
            

            <li>
            <h2>使ってみる</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.ja.html">AMP とは</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.ja.html">初めての AMP ページを作成する</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li class="current">
                  <span>AMP がパフォーマンスを改善する仕組み</span>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>ガイド</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.ja.html">アナリティクスの設定をする</a>
                

                

                </li>
                

              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>リファレンス</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>サポート</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

        <div class="content">
          <!-- article -->
          <article class="post">

    <h1 class="post-title">AMP がパフォーマンスを改善する仕組み</h1>

	<div class="post-content">
	    <p>AMP ページは以下の最適化処理の組み合わせによって高速化されており、一瞬で読み込まれているように見えます。</p>

<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">非同期スクリプトのみ使用を許可する</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">すべてのリソースサイズを静的に決定する</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">拡張機能によるレンダリング ブロックを回避する</a></li>
  <li><a href="#javascript---" id="markdown-toc-javascript---">サードパーティの JavaScript をすべてクリティカル パス から外す</a></li>
  <li><a href="#css--" id="markdown-toc-css--">CSS はすべてインライン スタイルにしてサイズを固定する</a></li>
  <li><a href="#section-3" id="markdown-toc-section-3">フォントのトリガーを効率化する</a></li>
  <li><a href="#section-4" id="markdown-toc-section-4">できるだけスタイルを再計算しない</a></li>
  <li><a href="#gpu-" id="markdown-toc-gpu-">GPU アクセラレーションが有効なアニメーションのみ実行する</a></li>
  <li><a href="#section-5" id="markdown-toc-section-5">リソースの読み込みに優先順位をつける</a></li>
  <li><a href="#section-6" id="markdown-toc-section-6">ページを瞬時に読み込む</a></li>
  <li><a href="#amp-" id="markdown-toc-amp-">AMP の高速化に貢献する</a></li>
</ul>

<p>説明を読むより聞く方が好きな方は、以下の動画をご覧ください。この動画では AMP エンジニアリング リーダーの Malte Ubl が、以下の記載内容と同様の概要説明をしています。</p>

<amp-youtube data-videoid="hVRkG1CQScA" layout="responsive" width="480" height="270">
</amp-youtube>

<h2 id="section">非同期スクリプトのみ使用を許可する</h2>

<p>JavaScript は
ページ上のほぼすべての要素を変更できる強力な言語ですが、
DOM の構築をブロックして、ページのレンダリングを遅らせてしまうことがあります
（<a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/adding-interactivity-with-javascript">JavaScript との相互作用を追加する</a>もご覧ください）。
JavaScript によってページ レンダリングの速度が低下しないよう、
AMP では非同期の JavaScript のみ使用を許可しています。</p>

<p>作成した JavaScript を AMP ページに使うことは禁止されています。
インタラクティブなページ機能については、JavaScript の代わりに
カスタム AMP 要素で処理します。
カスタム AMP 要素の内部で JavaScript が使われている場合もありますが、
それらはパフォーマンスを低下させないよう綿密に設計されています。</p>

<p>一方、サードパーティの JS は iframe 内で使用可能で、
レンダリングの妨げにはなりません。
たとえば、サードパーティの JS が
<a href="http://www.stevesouders.com/blog/2012/04/10/dont-docwrite-scripts/">パフォーマンスにかなりの悪影響を及ぼす <code class="highlighter-rouge">document.write</code> API</a> を使っていても、
メインページのレンダリングをブロックすることはありません。</p>

<h2 id="section-1">すべてのリソースサイズを静的に決定する</h2>

<p>イメージや広告、iframe などの外部リソースのサイズは HTML で規定する必要があります。
そうすることで、AMP はリソースがダウンロードされる前に、各要素のサイズとレイアウトを決定できます。
また、AMP はリソースのダウンロードを待たずに、ページのレイアウトを読み込みます。</p>

<p>AMP はドキュメントからリソース レイアウトを分離します。
たった 1 回の HTTP リクエストで、すべてのドキュメント
（<a href="#font-triggering-must-be-efficient">とフォント</a>）を配置できます。
AMP はリソースを多く消費するスタイルの再計算やブラウザでのレイアウトをしないよう最適化されているため、リソース読み込み後に再配置をすることは一切ありません。</p>

<h2 id="section-2">拡張機能によるレンダリング ブロックを回避する</h2>

<p>AMP では、拡張機能がページ レンダリングをブロックしないようにしています。
AMP は拡張機能にも対応しています。
<a href="/docs/reference/extended/amp-lightbox.html">ライトボックス</a>、
<a href="/docs/reference/extended/amp-instagram.html">Instagram の埋め込み</a>、
<a href="/docs/reference/extended/amp-twitter.html">ツイート</a>などがその例です。
これらの機能は追加の HTTP リクエストを必要としますが、
リクエストによってページのレイアウトやレンダリングがブロックされることはありません。</p>

<p>カスタム スクリプトを使用しているページは、
最終的にカスタムタグが含まれることを AMP システムに通知する必要があります。
たとえば、<a href="/docs/reference/extended/amp-iframe.html"><code class="highlighter-rouge">amp-iframe</code></a> スクリプトは
<code class="highlighter-rouge">amp-iframe</code> タグが含まれることをシステムに通知します。
AMP は中身がわからない状態で、先に iframe ボックスを作成します。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">async</span> <span class="na">custom-element=</span><span class="s">"amp-iframe"</span> <span class="na">src=</span><span class="s">"https://cdn.ampproject.org/v0/amp-youtube-0.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<h2 id="javascript---">サードパーティの JavaScript をすべてクリティカル パス から外す</h2>

<p>サードパーティの JS は同期的に JS を読み込んで、
同期型のスクリプトを <code class="highlighter-rouge">document.write</code> する傾向があります。
たとえば 5 つの広告があって、それぞれ同期読み込みを 3 回ずつ行い、
接続のレイテンシが 1 秒であるとすると、
JS を読み込むだけで 18 秒もかかります。</p>

<p>AMP ページではサンドボックス化された iframe 内でのみ、サードパーティの JavaScript を使用できます。
このように使用を iframe 内に制限することで、メインページの実行をブロックしないようにしています。
仮に複数のスタイルを再計算する必要が出てきても、
iframe は非常に小さいので含まれる DOM もごくわずかで済みます。</p>

<p>スタイルの再計算やレイアウトに要する時間は DOM サイズに依存します。よってページのスタイルやレイアウトを再計算することに比べれば、iframe の再計算は非常に短時間で終わります。</p>

<h2 id="css--">CSS はすべてインライン スタイルにしてサイズを固定する</h2>

<p>CSS はページの読み込みや、あらゆるレンダリング処理をブロックし、肥大化する傾向があります。
そのため、AMP HTML ページはインライン スタイルで記述する必要があります。
これにより、一般的なウェブページに比べると 1 つ、たいていの場合は複数の HTTP リクエストがクリティカル レンダリング パスから削除できます。</p>

<p>また、インライン スタイルシートの最大サイズは 50 キロバイトです。
これだけあれば非常に凝ったページでも十分ですが、ページを制作する際は常にきれいな CSS を書くよう努めてください。</p>

<h2 id="section-3">フォントのトリガーを効率化する</h2>

<p>ウェブフォントは非常にサイズが大きいので、 <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization">ウェブフォントの最適化</a>はパフォーマンスに大きな影響を与えます。</p>

<p>同期スクリプトと外部スタイルシートがそれぞれ数個ある典型的なページの場合、それらがすべて処理されるまで、ブラウザは非常に重たいフォントのダウンロードを開始できません。</p>

<p>AMP システムではフォントのダウンロードが始まるまで HTTP リクエストを行わないと宣言しています。
それを実現できているのは、AMP の JS にはすべて非同期属性があり、インライン スタイルシートの使用のみ許可しているからです。その結果、ブラウザのフォント ダウンロードをブロックするような HTTP リクエストは発生しません。</p>

<h2 id="section-4">できるだけスタイルを再計算しない</h2>

<p>何かを計測すれば、必ずスタイルは再計算されます。するとブラウザはページ全体をレイアウトしなければならないので、多くのリソースが消費されます。</p>

<p>AMP ページでは、描画処理を始める前に DOM をすべて読み込みます。
これにより、1 フレームあたりのスタイル再計算は最大でも 1 回になります。</p>

<p>スタイルとレイアウトを再計算する際の影響については、
<a href="https://developers.google.com/web/fundamentals/performance/rendering/">レンダリング パフォーマンス</a>をご覧ください。</p>

<h2 id="gpu-">GPU アクセラレーションが有効なアニメーションのみ実行する</h2>

<p>手早く最適化する唯一の方法は、GPU 上で実行することです。
GPU はレイヤーやレイヤー上での実行方法を把握しているので、
レイヤーを移動したり、非表示にしたりできます。ただしページ レイアウトの更新はできません。
そのため GPU は更新処理をブラウザに任せますが、これは好ましいことではありません。</p>

<p>アニメーション関連の CSS 規則によると、アニメーションには必ず GPU アクセラレーションが使用されます。
具体的には、AMP は transform と opacity でのみアニメーションと遷移が可能なので、
ページレイアウトは必要ありません。
詳細については、
<a href="https://developers.google.com/web/fundamentals/performance/rendering/stick-to-compositor-only-properties-and-manage-layer-count">transform と opacity を使用してアニメーションを変更する</a>をご覧ください。</p>

<h2 id="section-5">リソースの読み込みに優先順位をつける</h2>

<p>AMP はあらゆるリソースのダウンロードを制御し、読み込むリソースの優先順位付けを行っています。
具体的には、必要なものだけを読み込み、遅延読み込みされるリソースはプリフェッチします。</p>

<p>AMP はリソースのダウンロード時に、
その時点で最も重要なリソースが最初にダウンロードされるよう処理を最適化します。
イメージや広告がダウンロードされるのは、ユーザーの目に入る可能性が高い場合や、
スクロールせずに見える範囲や、ユーザーがすぐに表示位置までスクロールすると考えられる場合のみです。</p>

<p>AMP は遅延読み込みされるリソースのプリフェッチもします。
リソースの読み込みはできるだけ後回しにしつつ、できるだけ早くプリフェッチを行うようにしています。
そうすることで読み込み時間が大幅に短縮され、
実際にリソースがユーザーに表示されるときだけ CPU が使用されます。</p>

<h2 id="section-6">ページを瞬時に読み込む</h2>

<p>AMP では、新しい <a href="http://www.w3.org/TR/resource-hints/#dfn-preconnect">preconnect API</a> を大いに活用して
HTTP リクエストを最大限に高速化しています。
その結果、
ユーザーがページの開く前に、そのページをレンダリングできます。
ユーザーが実際にページを選択した時点でページがすでに利用可能になっている場合もあるため、
瞬時にページを読み込むことができます。</p>

<p>プリレンダリングはすべてのウェブコンテンツに適用できますが、
帯域幅と CPU を多く消費します。AMP は、これらの消費を抑えるよう最適化されています。プリレンダリングによってダウンロードされるのは、スクロールせずに見える範囲にあるリソースのみです。
CPU を多く使うものは事前にレンダリングされません。</p>

<p>AMP ドキュメントを瞬時に読み込めるようにプリレンダリングする場合でも、
スクロールせずに見える範囲のリソースのみが実際にダウンロードされます。
AMP ドキュメントを瞬時に読み込めるようにプリレンダリングする場合でも、
CPU をたくさん使う可能性があるリソース（サードパーティの iframe など）はダウンロードされません。</p>

<p>詳細については、
<a href="https://medium.com/@cramforce/why-amp-html-does-not-take-full-advantage-of-the-preload-scanner-7e7f788aa94e">AMP HTML がプリロード スキャナーをフル活用しない理由</a>をご覧ください。</p>

<h2 id="amp-">AMP の高速化に貢献する</h2>
<p>AMP はオープンソースのプロジェクトです。
AMP をさらに高速にするため、皆さまのご協力をお願い致します。
詳細は、<a href="/docs/support/contribute.html">AMP プロジェクトに貢献する方法</a>をご覧ください。</p>

	</div>

</article>

          <!-- /article -->
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="row">
          <div class="twelve columns">
          </div>
        </div>
    </footer>
  </body>
</html>
