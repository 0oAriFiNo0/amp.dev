<!DOCTYPE html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <title>Analytics：基础知识</title>
    <link rel="canonical" href="https://www.ampproject.org/docs/guides/analytics/analytics_basics.zh-cn.html">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <meta property="og:description" content="从这里开始了解 AMP Analytics 的相关基础知识。">
    <meta name="description" content="从这里开始了解 AMP Analytics 的相关基础知识。">
    <link rel="shortcut icon" href="/docs/assets/amp_favicon.png?v=2">

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>

    <style amp-custom>
    body,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}html,body{background-color:#fbfafb;font-family:Roboto,verdana,arial,sans-serif;margin:0;overflow-x:hidden;padding:0}body{padding-top:66px}ul li,ol li{color:#333;font-size:16px;font-weight:300;line-height:24px}p{color:#333;font-size:16px;font-weight:300;line-height:24px}.container{box-sizing:border-box;margin:0 auto;max-width:1000px;padding:0 20px}.container.md{max-width:800px}.wrap{background-color:#fff;margin:0 auto}.centered{text-align:center}@media only screen and (max-width: 870px){.centered{text-align:left}}.align-right{text-align:right}.clearfix:after{content:"";display:table;clear:both}.clearfix .left{float:left}.clearfix .right{float:right}.clearfix .fill{overflow:hidden;width:auto}h1,h2,h3,h4,h5{color:#147bc1;font-weight:300;margin-top:1.1em;margin-bottom:0.5em}h1{font-size:43px}h2{font-size:36px}h3{font-size:26px}a{color:#0360B5;text-decoration:none}a:hover{text-decoration:underline}a.button{padding:1em;display:block;background-color:#F5F5F5;text-align:center}blockquote{color:#797c82;border-left:4px solid #f5f5f5;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}code{font-size:15px;border:1px solid #f5f5f5;border-radius:3px}code{padding:1px 5px}table{border-collapse:collapse}td,th{border:1px solid #FFFFFF;background:#F7F7F7;padding:0.5rem;text-align:left}td.col-fourty{width:40%}td.col-thirty{width:30%}th{background:#eee}th.col-twenty{width:20%}header{-webkit-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;-moz-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;font-size:14px;font-weight:300;transform:translateZ(0);backface-visibility:hidden;background-color:#fff}header .container{padding:0}@media only screen and (max-width: 870px){header .container{padding:0 10px}}header.absolute,header.fixed{-moz-transform:translateY(0%);-o-transform:translateY(0%);-ms-transform:translateY(0%);-webkit-transform:translateY(0%);transform:translateY(0%);-moz-transition:all 0.25s ease;-o-transition:all 0.25s ease;-ms-transition:all 0.25s ease;-webkit-transition:all 0.25s ease;transition:all 0.25s ease;left:0;position:fixed;top:0;width:100%;z-index:1000}header.absolute{position:absolute}header.nav--pinned,header.nav--unpinned,header.nav--top{position:fixed}@media only screen and (max-width: 870px){header.nav--pinned,header.nav--unpinned,header.nav--top{position:relative}}header.nav--pinned,header.nav--unpinned{background:#147bc1}header.nav--top{background-color:transparent}header.hidden{display:block}@media only screen and (max-width: 870px){header.hidden{-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);-webkit-transform:translateY(-100%);transform:translateY(-100%)}}header.menu-open{transform:translate(-243px, 0px)}@media only screen and (max-width: 870px){header .wrap{color:transparent}}header .content.mobile-show{padding:0 10px 5px}header .left-nav{-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;float:left;font-size:14px;letter-spacing:0.04em;margin-left:0}@media only screen and (max-width: 870px){header .left-nav{-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;flex:1 1 auto;padding:0 0 5px 0;text-align:left;width:auto}}header .left-nav .header-title{background-image:url("/docs/assets/logo-blue.svg");background-position:center left;background-repeat:no-repeat;background-size:40px 40px;color:#147bc1;font-family:Roboto, verdana, arial, sans-serif;margin:10px 0;padding:15px 10px 15px 50px;text-transform:none;white-space:nowrap;width:auto}@media only screen and (max-width: 870px){header .left-nav .header-title{line-height:41px;margin:6px 0;padding:0 0 0 50px;width:auto}}@media only screen and (max-width: 870px){header .clearfix{display:flex;flex-wrap:wrap-reverse}}header .alt{padding:15px 0;text-align:right;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-ms-flex-pack:center}header .alt.right{letter-spacing:0.04em;font-size:14px}@media only screen and (max-width: 870px){header .alt.right{float:right;text-align:center;flex:0;padding:0 0 10px;font-size:12px;display:inline-block}}header .tab{color:#147bc1;display:inline-block;padding:10px 15px;text-decoration:none;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab{margin-left:auto;padding:10px 12px}}header .tab.go-button{-webkit-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);-moz-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);background-color:#147bc1;border:0;border-radius:4px;color:#fff;font-family:Roboto, verdana, arial, sans-serif;font-size:14px;font-weight:500;padding:10px 20px;margin-left:10px;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab.go-button{margin-right:5px;margin-left:auto;padding:8px 10px}}header .tab.go-button:hover{text-decoration:none}header .tab.hamburger{font-size:50px;line-height:38px;background:none;border:none;margin-top:0;padding-top:0;position:relative;top:4px;display:none}@media only screen and (max-width: 870px){header .tab.desktop{display:none}header .tab.hamburger{display:inline-block}}@media only screen and (max-width: 320px){header .header-title span{display:none}header .header-title::after{content:"AMP"}}.main{display:-webkit-flex;display:flex;padding-top:40px;padding-bottom:30px}.main h1{margin-top:0}.main h1:before,.main h2:before,.main h3:before,.main h4:before,.main h5:before{display:block;content:" ";margin-top:-106px;height:106px;visibility:hidden}.main .content{flex-grow:1;-webkit-flex-grow:1;transition:all 0.25s ease;transform:translate(0, 0);will-change:transform;word-break:break-word;min-width:0}.main .content.menu-open{transform:translate(-243px, 0)}.main .content ul,.main .content ol{margin-left:40px}.main .content{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.main amp-img,.main amp-youtube,.main amp-iframe{margin:1em 0}nav{border-right:2px solid #E6E6E6;padding:20px;margin-right:30px;margin-left:-20px;width:200px;flex-shrink:0;-webkit-flex-shrink:0;background:#F7F7F7;margin-top:-40px;margin-bottom:-30px}nav h2{font-size:20px;color:#111;margin-top:0;margin-bottom:10px}nav ul li,nav ol li{margin-bottom:10px;list-style:none}nav ul li ul,nav ul li ol,nav ol li ul,nav ol li ol{padding-left:0;margin-left:20px;margin-bottom:1.2em}nav ul li ul li,nav ul li ol li,nav ol li ul li,nav ol li ol li{margin-bottom:6px;font-size:14px;list-style:square;color:#CECECE}nav ul li ul li.current,nav ul li ol li.current,nav ol li ul li.current,nav ol li ol li.current{color:#222}nav ul li ul li span,nav ul li ol li span,nav ol li ul li span,nav ol li ol li span{font-weight:400;color:#222}nav ul li ul li ul,nav ul li ul li ol,nav ul li ol li ul,nav ul li ol li ol,nav ol li ul li ul,nav ol li ul li ol,nav ol li ol li ul,nav ol li ol li ol{margin-bottom:0;margin-left:0;padding-left:20px;border-top:1px solid #eee;padding-top:3px;padding-bottom:0px}nav ul li ul li ol li,nav ul li ol li ol li,nav ol li ul li ol li,nav ol li ol li ol li{list-style:decimal}@media only screen and (max-width: 870px){.container nav{display:none}amp-sidebar nav{margin-right:0;border-right:none;margin-top:0;padding-left:36px}}pre{overflow:auto;tab-size:2;word-break:normal;line-height:1.4;background:#F7F7F7}pre>code{white-space:pre;word-wrap:initial;display:block}pre>code td{border:0}.highlight .hll{background-color:#ffc}.highlight .c{color:#aaaaaa;font-style:italic}.highlight .err{color:#F00000}.highlight .k{color:#00a}.highlight .cm{color:#aaaaaa;font-style:italic}.highlight .cp{color:#4c8317}.highlight .c1{color:#aaaaaa;font-style:italic}.highlight .cs{color:#0000aa;font-style:italic}.highlight .gd{color:#a00}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#000080;font-weight:bold}.highlight .gi{color:#0a0}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#800080;font-weight:bold}.highlight .gt{color:#a00}.highlight .kc{color:#00a}.highlight .kd{color:#00a}.highlight .kn{color:#00a}.highlight .kp{color:#00a}.highlight .kr{color:#00a}.highlight .kt{color:#0aa}.highlight .m{color:#099}.highlight .s{color:#a50}.highlight .na{color:#1e90ff}.highlight .nb{color:#0aa}.highlight .nc{color:#00aa00;text-decoration:underline}.highlight .no{color:#a00}.highlight .nd{color:#888}.highlight .ni{color:#800000;font-weight:bold}.highlight .nf{color:#0a0}.highlight .nn{color:#00aaaa;text-decoration:underline}.highlight .nt{color:#1e90ff;font-weight:bold}.highlight .nv{color:#a00}.highlight .ow{color:#00a}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#a50}.highlight .sc{color:#a50}.highlight .sd{color:#a50}.highlight .s2{color:#a50}.highlight .se{color:#a50}.highlight .sh{color:#a50}.highlight .si{color:#a50}.highlight .sx{color:#a50}.highlight .sr{color:#099}.highlight .s1{color:#a50}.highlight .ss{color:#00a}.highlight .bp{color:#0aa}.highlight .vc{color:#a00}.highlight .vg{color:#a00}.highlight .vi{color:#a00}.highlight .il{color:#099}.highlight .lineno{-webkit-user-select:none;-moz-user-select:none;-o-user-select:none}.lineno::-moz-selection{background-color:transparent}.lineno::selection{background-color:transparent}footer{padding:40px 0 60px 100px;background-color:#f5f5f5}footer p{margin:0}footer .footer-image{height:25px;width:25px;padding-left:25px;float:right}
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,500,700">
  </head>

  <body>
    <amp-analytics type="googleanalytics" id="analytics-ga">
    <script type="application/json">
    {
      "vars": {
        "account": "UA-67833617-1"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
    </script>
    </amp-analytics>

    <amp-sidebar id='sidebar' side='right' layout='nodisplay'>
              
        <nav>
          <ul>
            
            

            <li>
            <h2>入门指南</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.zh-cn.html">什么是 AMP？</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.zh-cn.html">创建您的第一个 AMP 页面</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/technical_overview.zh-cn.html">AMP 如何提升性能</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>指南</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.zh-cn.html">配置 Analytics</a>
                

                
                  <ul>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li class="current">
                      <span>Analytics：基础知识</span>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/deep_dive_analytics.zh-cn.html">深入了解 AMP Analytics</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/use_cases.zh-cn.html">用例</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  </ul>
                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>参考</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>支持</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

    </amp-sidebar>

    <header class="fixed">
      <div class="wrap">
        <div class="container">
          <div class="clearfix">
          <div class="left-nav">
              <a href="https://ampproject.org" class="tab header-title">
                <span>Accelerated
                Mobile
                Pages
                Project</span>
              </a>
            </div>
            <div class="right alt">
              <a class="tab desktop" href="/docs/support/faqs.html">
                常见问题解答
              </a>
              <a class="tab desktop" href="https://amphtml.wordpress.com">
                博客
              </a>
              <a class="tab desktop" href="https://github.com/ampproject/amphtml">
                GitHub
              </a>
              <a class="tab desktop" href="/docs/get_started/about-amp.html">
                文档
              </a>
              <button class="tab hamburger" id="menu-button" on='tap:sidebar.toggle'>&#x2261;</button>
            </div>
          </div>
        </div>
      </div>
    </header>


    <div class="wrap">
      <div class="container main">
        
        <nav>
          <ul>
            
            

            <li>
            <h2>入门指南</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.zh-cn.html">什么是 AMP？</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.zh-cn.html">创建您的第一个 AMP 页面</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/technical_overview.zh-cn.html">AMP 如何提升性能</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>指南</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.zh-cn.html">配置 Analytics</a>
                

                
                  <ul>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li class="current">
                      <span>Analytics：基础知识</span>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/deep_dive_analytics.zh-cn.html">深入了解 AMP Analytics</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/use_cases.zh-cn.html">用例</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  </ul>
                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>参考</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>支持</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

        <div class="content">
          <!-- article -->
          <article class="post">

    <h1 class="post-title">Analytics：基础知识</h1>

	<div class="post-content">
	    <p>从这里开始了解 AMP Analytics 的相关基础知识。</p>

<ul id="markdown-toc">
  <li><a href="#amp-pixel--amp-analytics" id="markdown-toc-amp-pixel--amp-analytics">使用 amp-pixel 还是 amp-analytics？</a></li>
  <li><a href="#section" id="markdown-toc-section">创建简单的分析配置</a>    <ul>
      <li><a href="#amp-pixel-" id="markdown-toc-amp-pixel-">简单的 amp-pixel 配置</a></li>
      <li><a href="#amp-analytics-" id="markdown-toc-amp-analytics-">简单的 amp-analytics 配置</a></li>
    </ul>
  </li>
  <li><a href="#section-1" id="markdown-toc-section-1">变量替代</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">用户识别</a></li>
</ul>

<h2 id="amp-pixel--amp-analytics">使用 amp-pixel 还是 amp-analytics？</h2>

<p>AMP 提供了两个组件，可满足您的分析和测量需求：
<a href="/docs/reference/amp-pixel.html">amp-pixel</a> 和
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a>。
两个选项都可将分析数据发送到定义的端点。</p>

<p>如果您在寻求像简单的<a href="https://en.wikipedia.org/wiki/Web_beacon#Implementation">跟踪像素</a>这样的行为，则使用 <code class="highlighter-rouge">amp-pixel</code> 组件，它提供了基本的页面视图跟踪功能；页面视图数据将发送到定义的 URL。</p>

<p>某些与供应商的集成可能需要此组件，在这种情况下，集成将指定确切的 URL 端点。对于大多数分析解决方案，请使用 <code class="highlighter-rouge">amp-analytics</code>。</p>

<p>页面视图跟踪功能在 <code class="highlighter-rouge">amp-analytics</code> 中也有效。
但您也可以使用任何类型的页面内容（包括链接点击和按钮点击）来跟踪用户互动。</p>

<p>并且，您可以测量用户在页面上滚动了多长距离、用户是否与社交媒体互动等信息（请参阅<a href="/docs/guides/analytics/deep_dive_analytics.html">深入了解 AMP Analytics</a>）。</p>

<p>在与 AMP 平台集成的过程中，提供商提供了预定义的 <code class="highlighter-rouge">amp-analytics</code> 配置，以便能够轻松地捕获数据并推送到其跟踪工具。</p>

<p>从
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics 规范</a>中访问供应商文档。</p>

<p>您可以在页面中同时使用 <code class="highlighter-rouge">amp-pixel</code> 和 <code class="highlighter-rouge">amp-analytics</code>：
<code class="highlighter-rouge">amp-pixel</code> 用于简单的页面视图跟踪，而 <code class="highlighter-rouge">amp-analytics</code> 用于所有其他跟踪。</p>

<p>您也可以多次添加每个标记。
如果与多家分析供应商合作，则每个解决方案需要一个标记。</p>

<p>请谨记，越简单的 AMP 页面越适合于用户，因此，如果您不需要额外标记，就不要使用。</p>

<h2 id="section">创建简单的分析配置</h2>

<p>了解如何创建简单的
<a href="/docs/reference/amp-pixel.html">amp-pixel</a> 和
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> 配置。</p>

<h3 id="amp-pixel-">简单的 amp-pixel 配置</h3>

<p>如需创建简单的 <code class="highlighter-rouge">amp-pixel</code> 配置，请在 AMP 页面的正文中插入如下内容：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://foo.com/pixel?RANDOM"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p>在此示例中，页面视图数据将与一个随机数一起发送到定义的 URL。</p>

<p><code class="highlighter-rouge">RANDOM</code> 变量是
<a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md">AMP 平台的诸多替代变量</a>中的其中一个。
在此处详细了解<a href="/docs/guides/analytics/analytics_basics.html#variable-substitution">变量替代</a>。</p>

<p><a href="/docs/reference/amp-pixel.html">amp-pixel</a> 组件是内置组件，因此您无需像为 AMP 扩展组件（包括 <code class="highlighter-rouge">amp-analytics</code>）指明包含声明一样来指明包含声明。</p>

<p>但您应将 <code class="highlighter-rouge">amp-pixel</code> 标记放在尽可能靠近 <code class="highlighter-rouge">&lt;body&gt;</code> 开头的位置。</p>

<p>只有当标记进入视图本身时，才会触发跟踪像素功能。
如果 <code class="highlighter-rouge">amp-pixel</code> 放在靠近页面底部的位置，则可能不会触发。</p>

<h3 id="amp-analytics-">简单的 amp-analytics 配置</h3>

<p>如需创建简单的
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> 配置，
您必须将此 <code class="highlighter-rouge">custom-element</code> 声明包括在 AMP 文档的 <code class="highlighter-rouge">&lt;head&gt;</code> 中（另请参阅<a href="/docs/reference/extended.html#component-inclusion-declaration">组件包含声明</a>）：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">async</span> <span class="na">custom-element=</span><span class="s">"amp-analytics"</span> <span class="na">src=</span><span class="s">"https://cdn.ampproject.org/v0/amp-analytics-0.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>以下示例类似于 <a href="/docs/guides/analytics/analytics_basics.html#simple-amp-pixel-configuration"><code class="highlighter-rouge">amp-pixel</code> 示例</a>。
页面每次可见时，系统均将触发触发器事件，并将页面视图数据与一个随机 ID 一起发送到定义的 URL：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-analytics&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/json"</span><span class="nt">&gt;</span>
<span class="p">{</span>
  <span class="s2">"requests"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"pageview"</span><span class="err">:</span> <span class="s2">"https://foo.com/pixel?RANDOM"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"triggers"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"trackPageview"</span><span class="err">:</span> <span class="p">{</span>
      <span class="s2">"on"</span><span class="err">:</span> <span class="s2">"visible"</span><span class="p">,</span>
      <span class="s2">"request"</span><span class="err">:</span> <span class="s2">"pageview"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/amp-analytics&gt;</span></code></pre></figure>

<p>在上面的示例中，我们将一个名为 pageview 的请求定义为 https://foo.com/pixel?RANDOM。如前所述，RANDOM 将被替代为一个随机数，因此实际上，请求最终的显示是像 https://foo.com/pixel?0.23479283687235653498734 这样。</p>

<p>当页面变为可见（使用触发器关键字 <code class="highlighter-rouge">visible</code> 指定）时，事件将触发，并发送 <code class="highlighter-rouge">pageview</code> 请求。</p>

<p>触发器属性确定 pageview 请求何时触发。
详细了解<a href="/docs/guides/analytics/deep_dive_analytics.html#requests-triggers--transports">请求和触发器</a>。</p>

<h2 id="section-1">变量替代</h2>

<p><a href="/docs/reference/amp-pixel.html">amp-pixel</a> 和
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> 组件都允许所有标准 URL 变量替代（请参阅</p>

<p><a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md">AMP HTML 变量替代</a>）。
在下面的示例中，页面视图请求将随当前 AMP 文档的规范 URL、其标题以及<a href="/docs/guides/analytics/analytics_basics.html#user-identification">客户端 ID</a> 一起发送到 URL：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://example.com/analytics?url=${canonicalUrl}&amp;title=${title}&amp;clientId=${clientId(site-user-id)}"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p><code class="highlighter-rouge">amp-pixel</code> 标记很简单，可以只包括平台定义的变量，或包括 AMP 运行时可从 AMP 页面中解析的变量。</p>

<p>在上面的示例中，平台填充了
<code class="highlighter-rouge">canonicalURL</code> 和 <code class="highlighter-rouge">clientId(site-user-id)</code> 的值。</p>

<p><code class="highlighter-rouge">amp-analytics</code> 标记可包括与 <code class="highlighter-rouge">amp-pixel</code> 相同的变量，以及标记配置内唯一定义的变量。</p>

<p>在请求字符串中为页面或平台定义的变量使用 <code class="highlighter-rouge">${varName}</code> 格式。</p>

<p>在构建分析请求时，<code class="highlighter-rouge">amp-analytics</code> 标记会将模板替换为其实际值（另请参阅
<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/analytics-vars.md">amp-analytics 中支持的变量</a>）。</p>

<p>在下面的 <code class="highlighter-rouge">amp-analytics</code> 示例中，页面视图请求将发送到 URL，其中包含从变量替代（某些由平台定义，某些以内联方式在 <code class="highlighter-rouge">amp-analytics</code> 配置内定义）中提取的其他数据：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-analytics&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/json"</span><span class="nt">&gt;</span>
<span class="p">{</span>
  <span class="s2">"requests"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"pageview"</span><span class="err">:</span><span class="s2">"https://example.com/analytics?url=${canonicalUrl}&amp;title=${title}&amp;acct=${account}&amp;clientId=${clientId(site-user-id)}"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"vars"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"account"</span><span class="err">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"triggers"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"someEvent"</span><span class="err">:</span> <span class="p">{</span>
      <span class="s2">"on"</span><span class="err">:</span> <span class="s2">"visible"</span><span class="p">,</span>
      <span class="s2">"request"</span><span class="err">:</span> <span class="s2">"pageview"</span><span class="p">,</span>
      <span class="s2">"vars"</span><span class="err">:</span> <span class="p">{</span>
        <span class="s2">"title"</span><span class="err">:</span> <span class="s2">"My homepage"</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>  
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/amp-analytics&gt;</span></code></pre></figure>

<p>在上面的示例中，变量 <code class="highlighter-rouge">account</code> 和 <code class="highlighter-rouge">title</code> 是在 <code class="highlighter-rouge">amp-analytics</code> 配置中定义的。</p>

<p><code class="highlighter-rouge">canonicalUrl</code> 和 <code class="highlighter-rouge">clientId</code> 变量不是在配置中定义的，因此其值将被平台替代。</p>

<p><strong>重要说明：</strong> 变量替代非常灵活；
您可以在不同位置定义相同的变量，并且 AMP 运行时将按此优先顺序分析值（请参阅<a href="/docs/guides/analytics/deep_dive_analytics.html#variable-substitution-ordering">变量替代顺序</a>）。</p>

<h2 id="section-2">用户识别</h2>

<p>网站使用 Cookie 在浏览器中存储特定于用户的信息。
可以使用 Cookie 来指明用户之前已访问了某个网站。
在 AMP 中，可以从发布者的网站或缓存（比如 Google AMP Cache）中加载页面。</p>

<p>发布者的网站和缓存可能具有不同的域。
出于安全原因，浏览器可能会（并且通常将）限制访问另一个域的 Cookie（另请参阅<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/cross-origin-tracking.md">跨来源跟踪用户</a>）。</p>

<p>默认情况下，不管是从发布者的原始网站还是通过缓存访问页面，AMP 都将管理客户端 ID 的配置。</p>

<p>AMP 生成的客户端 ID 的值为 <code class="highlighter-rouge">"amp-"</code>，后跟一个随机 <code class="highlighter-rouge">base64</code> 编码字符串，如果相同用户再次访问页面，该用户的客户端 ID 将保持不变。</p>

<p>在所有情况下，AMP 都会管理客户端 ID 的读取和写入。
如果某个页面通过缓存加载或以其他方式显示在发布者原始网站查看上下文的外部，则需要特别关注这一点。</p>

<p>在这种情况下，将无法访问发布者网站的 Cookie。</p>

<p>如果从发布者的网站中加载 AMP 页面，则可以向 AMP 使用的客户端 ID 框架指明要查找和使用的回退 Cookie。</p>

<p>在这种情况下，<code class="highlighter-rouge">clientId</code> 变量的
<code class="highlighter-rouge">cid-scope-cookie-fallback-name</code> 参数将被解释为 Cookie 名称。</p>

<p>格式可能显示为
<code class="highlighter-rouge">CLIENT_ID(cid-scope-cookie-fallback-name)</code> 或
<code class="highlighter-rouge">${clientId(cid-scope-cookie-fallback-name)}</code>。</p>

<p>例如：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://foo.com/pixel?cid=CLIENT_ID(site-user-id-cookie-fallback-name)"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p>如果 AMP 发现此 Cookie 已设置，则客户端 ID 替代项将返回 Cookie 的值。</p>

<p>如果 AMP 发现此 Cookie 未设置，则 AMP 将生成一个值，格式为 <code class="highlighter-rouge">amp-</code>，后跟一个随机 base64 编码字符串。</p>

<p>如需详细了解客户端 ID 替代项，包括如何添加可选的用户通知 ID，请参阅 <a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/analytics-vars.md">AMP 分析中支持的变量</a>。</p>


	</div>

</article>

          <!-- /article -->
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="row">
          <div class="twelve columns">
          </div>
        </div>
    </footer>
  </body>
</html>
