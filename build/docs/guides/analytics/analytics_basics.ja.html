<!DOCTYPE html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <title>アナリティクス&#58; 基本</title>
    <link rel="canonical" href="https://www.ampproject.org/docs/guides/analytics/analytics_basics.ja.html">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <meta property="og:description" content="このページで AMP アナリティクスの基本を学びましょう。">
    <meta name="description" content="このページで AMP アナリティクスの基本を学びましょう。">
    <link rel="shortcut icon" href="/docs/assets/amp_favicon.png?v=2">

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>

    <style amp-custom>
    body,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}html,body{background-color:#fbfafb;font-family:Roboto,verdana,arial,sans-serif;margin:0;overflow-x:hidden;padding:0}body{padding-top:66px}ul li,ol li{color:#333;font-size:16px;font-weight:300;line-height:24px}p{color:#333;font-size:16px;font-weight:300;line-height:24px}.container{box-sizing:border-box;margin:0 auto;max-width:1000px;padding:0 20px}.container.md{max-width:800px}.wrap{background-color:#fff;margin:0 auto}.centered{text-align:center}@media only screen and (max-width: 870px){.centered{text-align:left}}.align-right{text-align:right}.clearfix:after{content:"";display:table;clear:both}.clearfix .left{float:left}.clearfix .right{float:right}.clearfix .fill{overflow:hidden;width:auto}h1,h2,h3,h4,h5{color:#147bc1;font-weight:300;margin-top:1.1em;margin-bottom:0.5em}h1{font-size:43px}h2{font-size:36px}h3{font-size:26px}a{color:#0360B5;text-decoration:none}a:hover{text-decoration:underline}a.button{padding:1em;display:block;background-color:#F5F5F5;text-align:center}blockquote{color:#797c82;border-left:4px solid #f5f5f5;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}code{font-size:15px;border:1px solid #f5f5f5;border-radius:3px}code{padding:1px 5px}table{border-collapse:collapse}td,th{border:1px solid #FFFFFF;background:#F7F7F7;padding:0.5rem;text-align:left}td.col-fourty{width:40%}td.col-thirty{width:30%}th{background:#eee}th.col-twenty{width:20%}header{-webkit-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;-moz-box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;box-shadow:rgba(0,0,0,0.15) 1px 1px 14px;font-size:14px;font-weight:300;transform:translateZ(0);backface-visibility:hidden;background-color:#fff}header .container{padding:0}@media only screen and (max-width: 870px){header .container{padding:0 10px}}header.absolute,header.fixed{-moz-transform:translateY(0%);-o-transform:translateY(0%);-ms-transform:translateY(0%);-webkit-transform:translateY(0%);transform:translateY(0%);-moz-transition:all 0.25s ease;-o-transition:all 0.25s ease;-ms-transition:all 0.25s ease;-webkit-transition:all 0.25s ease;transition:all 0.25s ease;left:0;position:fixed;top:0;width:100%;z-index:1000}header.absolute{position:absolute}header.nav--pinned,header.nav--unpinned,header.nav--top{position:fixed}@media only screen and (max-width: 870px){header.nav--pinned,header.nav--unpinned,header.nav--top{position:relative}}header.nav--pinned,header.nav--unpinned{background:#147bc1}header.nav--top{background-color:transparent}header.hidden{display:block}@media only screen and (max-width: 870px){header.hidden{-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);-webkit-transform:translateY(-100%);transform:translateY(-100%)}}header.menu-open{transform:translate(-243px, 0px)}@media only screen and (max-width: 870px){header .wrap{color:transparent}}header .content.mobile-show{padding:0 10px 5px}header .left-nav{-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;float:left;font-size:14px;letter-spacing:0.04em;margin-left:0}@media only screen and (max-width: 870px){header .left-nav{-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-ms-flex-pack:start;flex:1 1 auto;padding:0 0 5px 0;text-align:left;width:auto}}header .left-nav .header-title{background-image:url("/docs/assets/logo-blue.svg");background-position:center left;background-repeat:no-repeat;background-size:40px 40px;color:#147bc1;font-family:Roboto, verdana, arial, sans-serif;margin:10px 0;padding:15px 10px 15px 50px;text-transform:none;white-space:nowrap;width:auto}@media only screen and (max-width: 870px){header .left-nav .header-title{line-height:41px;margin:6px 0;padding:0 0 0 50px;width:auto}}@media only screen and (max-width: 870px){header .clearfix{display:flex;flex-wrap:wrap-reverse}}header .alt{padding:15px 0;text-align:right;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-ms-flex-pack:center}header .alt.right{letter-spacing:0.04em;font-size:14px}@media only screen and (max-width: 870px){header .alt.right{float:right;text-align:center;flex:0;padding:0 0 10px;font-size:12px;display:inline-block}}header .tab{color:#147bc1;display:inline-block;padding:10px 15px;text-decoration:none;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab{margin-left:auto;padding:10px 12px}}header .tab.go-button{-webkit-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);-moz-box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);box-shadow:-1px 6px 6px -3px rgba(0,0,0,0.22);background-color:#147bc1;border:0;border-radius:4px;color:#fff;font-family:Roboto, verdana, arial, sans-serif;font-size:14px;font-weight:500;padding:10px 20px;margin-left:10px;text-transform:uppercase}@media only screen and (max-width: 870px){header .tab.go-button{margin-right:5px;margin-left:auto;padding:8px 10px}}header .tab.go-button:hover{text-decoration:none}header .tab.hamburger{font-size:50px;line-height:38px;background:none;border:none;margin-top:0;padding-top:0;position:relative;top:4px;display:none}@media only screen and (max-width: 870px){header .tab.desktop{display:none}header .tab.hamburger{display:inline-block}}@media only screen and (max-width: 320px){header .header-title span{display:none}header .header-title::after{content:"AMP"}}.main{display:-webkit-flex;display:flex;padding-top:40px;padding-bottom:30px}.main h1{margin-top:0}.main h1:before,.main h2:before,.main h3:before,.main h4:before,.main h5:before{display:block;content:" ";margin-top:-106px;height:106px;visibility:hidden}.main .content{flex-grow:1;-webkit-flex-grow:1;transition:all 0.25s ease;transform:translate(0, 0);will-change:transform;word-break:break-word;min-width:0}.main .content.menu-open{transform:translate(-243px, 0)}.main .content ul,.main .content ol{margin-left:40px}.main .content{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.main amp-img,.main amp-youtube,.main amp-iframe{margin:1em 0}nav{border-right:2px solid #E6E6E6;padding:20px;margin-right:30px;margin-left:-20px;width:200px;flex-shrink:0;-webkit-flex-shrink:0;background:#F7F7F7;margin-top:-40px;margin-bottom:-30px}nav h2{font-size:20px;color:#111;margin-top:0;margin-bottom:10px}nav ul li,nav ol li{margin-bottom:10px;list-style:none}nav ul li ul,nav ul li ol,nav ol li ul,nav ol li ol{padding-left:0;margin-left:20px;margin-bottom:1.2em}nav ul li ul li,nav ul li ol li,nav ol li ul li,nav ol li ol li{margin-bottom:6px;font-size:14px;list-style:square;color:#CECECE}nav ul li ul li.current,nav ul li ol li.current,nav ol li ul li.current,nav ol li ol li.current{color:#222}nav ul li ul li span,nav ul li ol li span,nav ol li ul li span,nav ol li ol li span{font-weight:400;color:#222}nav ul li ul li ul,nav ul li ul li ol,nav ul li ol li ul,nav ul li ol li ol,nav ol li ul li ul,nav ol li ul li ol,nav ol li ol li ul,nav ol li ol li ol{margin-bottom:0;margin-left:0;padding-left:20px;border-top:1px solid #eee;padding-top:3px;padding-bottom:0px}nav ul li ul li ol li,nav ul li ol li ol li,nav ol li ul li ol li,nav ol li ol li ol li{list-style:decimal}@media only screen and (max-width: 870px){.container nav{display:none}amp-sidebar nav{margin-right:0;border-right:none;margin-top:0;padding-left:36px}}pre{overflow:auto;tab-size:2;word-break:normal;line-height:1.4;background:#F7F7F7}pre>code{white-space:pre;word-wrap:initial;display:block}pre>code td{border:0}.highlight .hll{background-color:#ffc}.highlight .c{color:#aaaaaa;font-style:italic}.highlight .err{color:#F00000}.highlight .k{color:#00a}.highlight .cm{color:#aaaaaa;font-style:italic}.highlight .cp{color:#4c8317}.highlight .c1{color:#aaaaaa;font-style:italic}.highlight .cs{color:#0000aa;font-style:italic}.highlight .gd{color:#a00}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#000080;font-weight:bold}.highlight .gi{color:#0a0}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#800080;font-weight:bold}.highlight .gt{color:#a00}.highlight .kc{color:#00a}.highlight .kd{color:#00a}.highlight .kn{color:#00a}.highlight .kp{color:#00a}.highlight .kr{color:#00a}.highlight .kt{color:#0aa}.highlight .m{color:#099}.highlight .s{color:#a50}.highlight .na{color:#1e90ff}.highlight .nb{color:#0aa}.highlight .nc{color:#00aa00;text-decoration:underline}.highlight .no{color:#a00}.highlight .nd{color:#888}.highlight .ni{color:#800000;font-weight:bold}.highlight .nf{color:#0a0}.highlight .nn{color:#00aaaa;text-decoration:underline}.highlight .nt{color:#1e90ff;font-weight:bold}.highlight .nv{color:#a00}.highlight .ow{color:#00a}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#a50}.highlight .sc{color:#a50}.highlight .sd{color:#a50}.highlight .s2{color:#a50}.highlight .se{color:#a50}.highlight .sh{color:#a50}.highlight .si{color:#a50}.highlight .sx{color:#a50}.highlight .sr{color:#099}.highlight .s1{color:#a50}.highlight .ss{color:#00a}.highlight .bp{color:#0aa}.highlight .vc{color:#a00}.highlight .vg{color:#a00}.highlight .vi{color:#a00}.highlight .il{color:#099}.highlight .lineno{-webkit-user-select:none;-moz-user-select:none;-o-user-select:none}.lineno::-moz-selection{background-color:transparent}.lineno::selection{background-color:transparent}footer{padding:40px 0 60px 100px;background-color:#f5f5f5}footer p{margin:0}footer .footer-image{height:25px;width:25px;padding-left:25px;float:right}
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,500,700">
  </head>

  <body>
    <amp-analytics type="googleanalytics" id="analytics-ga">
    <script type="application/json">
    {
      "vars": {
        "account": "UA-67833617-1"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
    </script>
    </amp-analytics>

    <amp-sidebar id='sidebar' side='right' layout='nodisplay'>
              
        <nav>
          <ul>
            
            

            <li>
            <h2>使ってみる</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.ja.html">AMP とは</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.ja.html">初めての AMP ページを作成する</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/technical_overview.ja.html">AMP がパフォーマンスを改善する仕組み</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>ガイド</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.ja.html">アナリティクスの設定をする</a>
                

                
                  <ul>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li class="current">
                      <span>アナリティクス&#58; 基本</span>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/deep_dive_analytics.ja.html">AMP アナリティクスについて深く学ぶ</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/use_cases.ja.html">ユースケース</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                  
                  
                  </ul>
                

                </li>
                

              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>リファレンス</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>サポート</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

    </amp-sidebar>

    <header class="fixed">
      <div class="wrap">
        <div class="container">
          <div class="clearfix">
          <div class="left-nav">
              <a href="https://ampproject.org" class="tab header-title">
                <span>Accelerated
                Mobile
                Pages
                Project</span>
              </a>
            </div>
            <div class="right alt">
              <a class="tab desktop" href="/docs/support/faqs.html">
                よくある質問
              </a>
              <a class="tab desktop" href="https://amphtml.wordpress.com">
                ブログ
              </a>
              <a class="tab desktop" href="https://github.com/ampproject/amphtml">
                GitHub
              </a>
              <a class="tab desktop" href="/docs/get_started/about-amp.html">
                ドキュメント
              </a>
              <button class="tab hamburger" id="menu-button" on='tap:sidebar.toggle'>&#x2261;</button>
            </div>
          </div>
        </div>
      </div>
    </header>


    <div class="wrap">
      <div class="container main">
        
        <nav>
          <ul>
            
            

            <li>
            <h2>使ってみる</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/about-amp.ja.html">AMP とは</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/create_page.ja.html">初めての AMP ページを作成する</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/get_started/technical_overview.ja.html">AMP がパフォーマンスを改善する仕組み</a>
                

                

                </li>
                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>ガイド</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                

              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              

                
                

                
                
                <li>
                  <a href="/docs/guides/analytics_amp.ja.html">アナリティクスの設定をする</a>
                

                
                  <ul>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li class="current">
                      <span>アナリティクス&#58; 基本</span>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/deep_dive_analytics.ja.html">AMP アナリティクスについて深く学ぶ</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                    
                    <li>
                      <a href="/docs/guides/analytics/use_cases.ja.html">ユースケース</a>
                    </li>
                    
                    
                    
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  

                    
                    

                    
                    
                    
                  
                  
                  </ul>
                

                </li>
                

              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>リファレンス</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            

            <li>
            <h2>サポート</h2>

            <ul>
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
            </li>
            
            
            
            
          </ul>
        </nav>
        

        <div class="content">
          <!-- article -->
          <article class="post">

    <h1 class="post-title">アナリティクス&#58; 基本</h1>

	<div class="post-content">
	    <p>このページで AMP アナリティクスの基本を学びましょう。</p>

<ul id="markdown-toc">
  <li><a href="#amp-pixel--amp-analytics-" id="markdown-toc-amp-pixel--amp-analytics-">amp-pixel または amp-analytics を使う</a></li>
  <li><a href="#section" id="markdown-toc-section">シンプルなアナリティクス設定にする</a>    <ul>
      <li><a href="#amp-pixel-" id="markdown-toc-amp-pixel-">シンプルな amp-pixel 設定</a></li>
      <li><a href="#amp-analytics-" id="markdown-toc-amp-analytics-">シンプルな amp-analytics 設定</a></li>
    </ul>
  </li>
  <li><a href="#section-1" id="markdown-toc-section-1">変数置換</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">ユーザー認証</a></li>
</ul>

<h2 id="amp-pixel--amp-analytics-">amp-pixel または amp-analytics を使う</h2>

<p>AMP にはアナリティクスや計測に役立つ 2 つのコンポーネントがあります。
<a href="/docs/reference/amp-pixel.html">amp-pixel</a> と
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> です。
どちらを使用してもアナリティクスのデータは指定したエンドポイントに送信されます。</p>

<p>シンプルな<a href="https://en.wikipedia.org/wiki/Web_beacon#Implementation">ピクセルトラッキング</a>のような動作が好みであれば、<code class="highlighter-rouge">amp-pixel</code> コンポーネントの基本的なページビュー トラッキングがお勧めです。ページビュー データは指定の URL に送信されます。</p>

<p>統合するベンダーによっては、このコンポーネントが必要になることがあり、その場合はベンダーが正確なエンドポイント URL を指定します。アナリティクス ソリューションには、主に <code class="highlighter-rouge">amp-analytics</code> を使用するようにしてください。</p>

<p>ページビュー トラッキングも <code class="highlighter-rouge">amp-analytics</code> で動作します。
リンクやボタンのクリックなど、あらゆるページコンテンツに対するユーザー エンゲージメントもトラッキングできます。</p>

<p>ユーザーがページをどのくらいスクロールしたか、ソーシャル メディアを使用しているかなどもわかります。詳細については <a href="/docs/guides/analytics/deep_dive_analytics.html">AMP アナリティクスについて深く学ぶ</a>をご覧ください。</p>

<p>AMP プラットフォームを統合するにあたり、データの取得やトラッキング ツールの転送が楽に行えるよう、プロバイダーはあらかじめ定義した <code class="highlighter-rouge">amp-analytics</code> 設定を提示しています。</p>

<p>ベンダーのドキュメントは、<a href="/docs/reference/extended/amp-analytics.html">amp-analytics 仕様</a>からアクセスできます。</p>

<p>ページに <code class="highlighter-rouge">amp-pixel</code> と <code class="highlighter-rouge">amp-analytics</code> を両方使うことも可能です。
<code class="highlighter-rouge">amp-pixel</code> はシンプルなページビュー トラッキング用で、 <code class="highlighter-rouge">amp-analytics</code> はそれ以外の全機能に対応しています。</p>

<p>各タグを複数追加することもできます。
アナリティクス プロバイダーを複数使っている場合は、ソリューションごとに 1 つのタグが必要です。</p>

<p>ユーザーにとって AMP ページはシンプルであるほど良いので、余分なタグは使わないようにしましょう。</p>

<h2 id="section">シンプルなアナリティクス設定にする</h2>

<p>次に、
<a href="/docs/reference/amp-pixel.html">amp-pixel</a> と
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> のシンプルな設定方法を説明します。</p>

<h3 id="amp-pixel-">シンプルな amp-pixel 設定</h3>

<p>シンプルに <code class="highlighter-rouge">amp-pixel</code> を設定するには、以下のような記載を AMP ページのボディ部に挿入します。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://foo.com/pixel?RANDOM"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p>この例では、ページビュー データは乱数と一緒に指定の URL に送信されます。</p>

<p><code class="highlighter-rouge">RANDOM</code> 変数は、数ある
<a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md">AMP プラットフォームの置換変数</a>のうちの 1 つです。
<a href="/docs/guides/analytics/analytics_basics.html#variable-substitution">変数置換</a>の詳細は、こちらをご覧ください。</p>

<p><a href="/docs/reference/amp-pixel.html">amp-pixel</a> はビルトインのコンポーネントなので、<code class="highlighter-rouge">amp-analytics</code> のような AMP 拡張コンポーネントと違って、宣言を追加する必要はありません。</p>

<p>ただし <code class="highlighter-rouge">amp-pixel</code> タグは、極力 <code class="highlighter-rouge">&lt;body&gt;</code> の先頭付近に配置してください。</p>

<p>トラッキング ピクセルはタグが表示されてから呼び出されるので、
<code class="highlighter-rouge">amp-pixel</code> がページ上のボタンの近くにあると、トラッキング ピクセルが呼び出されない可能性があります。</p>

<h3 id="amp-analytics-">シンプルな amp-analytics 設定</h3>

<p>シンプルに
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> を設定するには、
まず <code class="highlighter-rouge">custom-element</code> 宣言を
AMP ドキュメントの <code class="highlighter-rouge">&lt;head&gt;</code> 内に入れます
（<a href="/docs/reference/extended.html#component-inclusion-declaration">コンポーネントを組み込むための宣言</a>もご覧ください）。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">async</span> <span class="na">custom-element=</span><span class="s">"amp-analytics"</span> <span class="na">src=</span><span class="s">"https://cdn.ampproject.org/v0/amp-analytics-0.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>以下の例は <a href="/docs/guides/analytics/analytics_basics.html#simple-amp-pixel-configuration"><code class="highlighter-rouge">amp-pixel</code> の例</a>と似ています。
ページが表示されるたびに
イベントが発生して、
ページビュー データがランダム ID と一緒に指定の URL に送信されます。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-analytics&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/json"</span><span class="nt">&gt;</span>
<span class="p">{</span>
  <span class="s2">"requests"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"pageview"</span><span class="err">:</span> <span class="s2">"https://foo.com/pixel?RANDOM"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"triggers"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"trackPageview"</span><span class="err">:</span> <span class="p">{</span>
      <span class="s2">"on"</span><span class="err">:</span> <span class="s2">"visible"</span><span class="p">,</span>
      <span class="s2">"request"</span><span class="err">:</span> <span class="s2">"pageview"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/amp-analytics&gt;</span></code></pre></figure>

<p>上の例では、pageview というリクエストを https://foo.com/pixel?RANDOM と定義しています。上述のとおり、RANDOM は乱数に置換されます。よって最終的なリクエストは https://foo.com/pixel?0.23479283687235653498734 のようになります。</p>

<p>（トリガー キーワード <code class="highlighter-rouge">visible</code> 使って指定したとおり）ページが表示されるとイベントが発生して <code class="highlighter-rouge">pageview</code> リクエストが送信されます。</p>

<p>ページビュー リクエストが送信されるタイミングは、トリガー属性で定義します。
詳細については<a href="/docs/guides/analytics/deep_dive_analytics.html#requests-triggers--transports">リクエストとトリガー</a>をご覧ください。</p>

<h2 id="section-1">変数置換</h2>

<p><a href="/docs/reference/amp-pixel.html">amp-pixel</a> と
<a href="/docs/reference/extended/amp-analytics.html">amp-analytics</a> コンポーネントは、
どちらも標準的な URL の変数置換をすべて許可します
（<a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md">AMP HTML の変数置換</a>をご覧ください）。
次の例では、
ページビュー リクエストを
現在の AMP ドキュメントの正規化した URL とそのタイトル、
<a href="/docs/guides/analytics/analytics_basics.html#user-identification">クライアント ID</a> と一緒に URL に送信します。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://example.com/analytics?url=${canonicalUrl}&amp;title=${title}&amp;clientId=${clientId(site-user-id)}"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p><code class="highlighter-rouge">amp-pixel</code> タグはシンプルなので、プラットフォームで定義された変数か、AMP ランタイムで AMP ページから解析できる変数のみを含めることができます。</p>

<p>上での例では、<code class="highlighter-rouge">canonicalURL</code> と <code class="highlighter-rouge">clientId(site-user-id)</code> の値はプラットフォームで設定されます。</p>

<p><code class="highlighter-rouge">amp-analytics</code> タグには、<code class="highlighter-rouge">amp-pixel</code> と同じ変数も、タグ設定内で一意に定義された変数も含めることができます。</p>

<p>ページのリクエスト文字列やプラットフォームで定義された変数には、<code class="highlighter-rouge">${varName}</code> フォーマットを使います。</p>

<p><code class="highlighter-rouge">amp-analytics</code> タグは、アナリティクス リクエストの作成時に、テンプレートを実際の値に置き換えます（<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/analytics-vars.md">amp-analytics でサポートされる変数</a>もご覧ください）。</p>

<p>以下の <code class="highlighter-rouge">amp-analytics</code> の例では、変数置換で抽出した追加データやプラットフォームから提供されたデータ、<code class="highlighter-rouge">amp-analytics</code> 設定内でインライン定義されたデータと一緒に、ページビュー リクエストが URL に送信されます。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-analytics&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/json"</span><span class="nt">&gt;</span>
<span class="p">{</span>
  <span class="s2">"requests"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"pageview"</span><span class="err">:</span><span class="s2">"https://example.com/analytics?url=${canonicalUrl}&amp;title=${title}&amp;acct=${account}&amp;clientId=${clientId(site-user-id)}"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"vars"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"account"</span><span class="err">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">"triggers"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"someEvent"</span><span class="err">:</span> <span class="p">{</span>
      <span class="s2">"on"</span><span class="err">:</span> <span class="s2">"visible"</span><span class="p">,</span>
      <span class="s2">"request"</span><span class="err">:</span> <span class="s2">"pageview"</span><span class="p">,</span>
      <span class="s2">"vars"</span><span class="err">:</span> <span class="p">{</span>
        <span class="s2">"title"</span><span class="err">:</span> <span class="s2">"My homepage"</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>  
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/amp-analytics&gt;</span></code></pre></figure>

<p>上の例では、変数 <code class="highlighter-rouge">account</code> と <code class="highlighter-rouge">title</code> は <code class="highlighter-rouge">amp-analytics</code> 設定内で定義されています。</p>

<p>変数 <code class="highlighter-rouge">canonicalUrl</code> と <code class="highlighter-rouge">clientId</code> は定義されていないので、プラットフォーム側で置換されます。</p>

<p><strong>重要:</strong> 変数置換は柔軟性が高いため、
同じ変数を別の場所で使用でき、AMP ランタイムは先行順に値を解析します（<a href="/docs/guides/analytics/deep_dive_analytics.html#variable-substitution-ordering">変数置換の順序</a>をご覧ください）。</p>

<h2 id="section-2">ユーザー認証</h2>

<p>ウェブサイトは Cookie を使用してユーザー固有の情報をブラウザに保存します。
Cookie によって、ユーザーが以前そのサイトにアクセスしたことがあるかどうかわかります。
AMP では、ページはサイトオーナーのウェブサイト、もしくはキャッシュ（Google AMP Cache など）のどちらかによって提供されます。</p>

<p>サイトオーナーのウェブサイトとキャッシュのドメインは、たいてい異なります。
ブラウザはセキュリティ上の理由により、別ドメインの Cookie へのアクセスを制限することができます（実際に制限することが多いです）（<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/cross-origin-tracking.md">ドメインをまたぐユーザー トラッキング</a>もご覧ください）。</p>

<p>AMP はデフォルトで、
サイトオーナーのオリジナル ウェブサイトからのページアクセスと、キャッシュ経由のアクセスの両方に対して、クライアント ID を提供できるようになっています。
AMP で生成されたクライアント ID の値は、<code class="highlighter-rouge">"amp-"</code> の後に <code class="highlighter-rouge">base64</code> でエンコードされたランダムな文字列が続きます。同じユーザーが再度アクセスした場合、この値は変わりません。</p>

<p>AMP は、いかなる場合もクライアント ID の読み書きを行います。
この点は、ページがキャッシュによって表示されている場合や、サイトオーナーのオリジナル サイトの閲覧コンテキスト外に表示されている場合に特に重要になります。</p>

<p>このようなケースでは、サイトオーナーのサイトの Cookie にアクセスできません。</p>

<p>AMP ページがサイトオーナーのサイトから提供されている場合は、AMP で使用するクライアント ID フレームワークに対して、検索して使用すべきフォールバック Cookie を通知することができます。</p>

<p>この場合、変数 <code class="highlighter-rouge">clientId</code> の引数 <code class="highlighter-rouge">cid-scope-cookie-fallback-name</code> が Cookie 名として認識されます。</p>

<p>フォーマットは <code class="highlighter-rouge">CLIENT_ID(cid-scope-cookie-fallback-name)</code>、または<code class="highlighter-rouge">${clientId(cid-scope-cookie-fallback-name)}</code> のどちらを使用しても構いません。</p>

<p>次に例を示します。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;amp-pixel</span> <span class="na">src=</span><span class="s">"https://foo.com/pixel?cid=CLIENT_ID(site-user-id-cookie-fallback-name)"</span><span class="nt">&gt;&lt;/amp-pixel&gt;</span></code></pre></figure>

<p>AMP で Cookie が設定済みと判断されると、クライアント ID は置換されて Cookie の値が返されます。</p>

<p>AMP で Cookie が未設定と判断されると、AMP は <code class="highlighter-rouge">amp-</code> の後ろに base64 エンコードされたランダムな文字列をつけたフォーマットの値を生成します。</p>

<p>クライアント ID の置換や任意のユーザー通知 ID の追加方法については、<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/analytics-vars.md">AMP アナリティクスでサポートされる変数</a>をご覧ください。</p>


	</div>

</article>

          <!-- /article -->
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="row">
          <div class="twelve columns">
          </div>
        </div>
    </footer>
  </body>
</html>
